<div class="pull-left">
    <span class="label">
        {% for notification in notifications %}
            {% set level = "constants.levels." ~ levels[notification.level] %}
            <a rel="popover" href="{{ path('admin_tools_log_systemlog_list') }}" class="notification-link">
                <i class="fa fa-flag color-notification color-{{ notification.level }}"></i> ({{ notification.nb }})
                <div class="head hide">
                    {{ notification.nb }} messages <i>{{ level|trans() }}</i>
                </div>
                <div class="content hide">
                    <ul>
                        {% for n in notificationsList %}
                            {% if n.level == notification.level %}
                                {% set type = "constants.types." ~ types[n.type] %}
                                <li>{{ type|trans() }} :
                                    {% if n.user != null %}
                                        {{ n.user.firstname }} {{ n.user.lastname }}
                                    {% else %}
                                        {{ n.content }}
                                    {% endif %}
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </a>
        {% endfor %}
    </span>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("[rel=popover]").each(function(){
            $(this).popover({
                html : true,
                trigger: 'hover',
                title: function() {
                    return $(this).children('.head').html();
                },
                content: function() {
                    return $(this).children('.content').html();
                },
                container: 'body',
                placement: 'bottom'
            });
        });
    });
</script>
